---
- name: create {{ item.state if item.state == "present" else "started" }} container
  docker_container:
    name: "{{ item.name }}"
    image: "{{ item.image }}"
    command: "{{ item.command }}"
    exposed_ports:
      "{{ item.exposed_ports | default(None)}}"
    network_mode: "{{ item.network_mode | default(\"bridge\")}}"
    state: "{{ item.state }}"
    tty: "{{ item.tty | default(\"no\") }}"
    interactive: "{{ item.interactive | default(\"no\") }}"
    detach: "{{ item.detach | default(\"no\")}}"
  when: item.state == "started" or item.state == "present"
